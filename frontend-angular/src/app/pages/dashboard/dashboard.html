<div class="dashboard-container">
  <!-- Sidebar Navigation -->
  <app-sidebar [activeRoute]="activeRoute"></app-sidebar>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <!-- Header -->
      <header class="dashboard-header">
        <h1 class="greeting">¡Hola, {{ currentUser?.name || 'Usuario' }}!</h1>
        <p class="subtitle">Un vistazo rápido a las encuestas disponibles en QuickSurvey</p>
      </header>

      <!-- Search Section -->
      <section class="search-section">
        <h2 class="section-title">Explora encuestas de otros usuarios</h2>

        <div class="search-bar">
          <svg
            class="search-icon"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 256 256"
          >
            <path
              fill="currentColor"
              d="M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"
            />
          </svg>
          <input
            type="text"
            class="search-input"
            placeholder="Buscar encuestas públicas..."
            [(ngModel)]="searchQuery"
            (input)="onSearchChange()"
          />
        </div>
      </section>

      <!-- Surveys Grid -->
      <section class="surveys-grid">
        <div class="survey-card" *ngFor="let survey of surveys">
          <h3 class="survey-title">{{ survey.title }}</h3>
          <p class="survey-author">De {{ getAuthorName(survey) }}</p>

          <div class="survey-footer">
            <div class="survey-votes">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32">
                <path
                  fill="currentColor"
                  d="M8 5v16h16V5zm2 2h12v12H10zm9.3 2.9L15 14.2l-2.3-2.3l-1.4 1.5l3 3l.7.7l.7-.7l5-5zM2 19v8h2v-6h2v-2zm24 0v2h2v6h2v-8zM6 23v2h20v-2z"
                />
              </svg>
              <span>{{ getVotesCount(survey) }} votos</span>
            </div>

            <button class="btn-participate" (click)="participate(survey.id)">PARTICIPAR</button>
          </div>
        </div>

        <!-- Mensaje cuando no hay resultados -->
        <div class="no-results" *ngIf="surveys.length === 0">
          <p>No se encontraron encuestas</p>
        </div>
      </section>

      <!-- Pagination -->
      <section class="pagination" *ngIf="filteredSurveys.length > pageSize">
        <button class="page-btn" (click)="prevPage()" [disabled]="currentPage === 1">
          ← Anterior
        </button>
        <span class="page-info">Página {{ currentPage }} de {{ totalPages }}</span>
        <button class="page-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
          Siguiente →
        </button>
      </section>
    </div>
  </main>
</div>
