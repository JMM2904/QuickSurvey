<div class="dashboard-container">
  <!-- Sidebar Navigation -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <h1 class="logo">
        <span class="logo-icon">○</span>
        QuickSurvey
      </h1>
    </div>

    <ul class="nav-menu">
      <li
        class="nav-item"
        [class.active]="activeRoute === 'inicio'"
        (click)="setActiveRoute('inicio')"
      >
        <a href="/dashboard" class="nav-link" (click)="$event.preventDefault()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor" d="m12 3l8 6v12h-5v-7H9v7H4V9z" />
          </svg>
          <span>Inicio</span>
        </a>
      </li>

      <li
        class="nav-item"
        [class.active]="activeRoute === 'crear'"
        (click)="setActiveRoute('crear')"
      >
        <a href="/dashboard" class="nav-link" (click)="$event.preventDefault()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor" d="M19 12.998h-6v6h-2v-6H5v-2h6v-6h2v6h6z" />
          </svg>
          <span>Crear encuesta</span>
        </a>
      </li>

      <li
        class="nav-item"
        [class.active]="activeRoute === 'encuestas'"
        (click)="setActiveRoute('encuestas')"
      >
        <a href="/dashboard" class="nav-link" (click)="$event.preventDefault()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 1200 1200">
            <path
              fill="currentColor"
              d="M600 0c-65.168 0-115.356 54.372-115.356 119.385c0 62.619-.439 117.407-.439 117.407h-115.87c-2.181 0-4.291.241-6.372.586h-32.227v112.573h540.527V237.378h-32.227c-2.081-.345-4.191-.586-6.372-.586H715.796s1.318-49.596 1.318-117.041C717.114 57.131 665.168 0 600 0M175.195 114.185V1200h849.609V114.185H755.64v78.662h191.382v928.345h-693.97V192.847H444.36v-78.662zM600 115.649c21.35 0 38.599 17.18 38.599 38.452c0 21.311-17.249 38.525-38.599 38.525s-38.599-17.215-38.599-38.525c0-21.271 17.249-38.452 38.599-38.452M329.736 426.27v38.525h38.599V426.27zm115.869.732v38.525h424.658v-38.525zm-115.869 144.58v38.525h38.599v-38.525zm115.869.732v38.599h424.658v-38.599zM329.736 716.895v38.525h38.599v-38.525zm115.869.805v38.525h424.658V717.7zM329.736 862.28v38.525h38.599V862.28zm115.869.806v38.525h424.658v-38.525zm-115.869 144.507v38.525h38.599v-38.525zm115.869.805v38.525h424.658v-38.525z"
            />
          </svg>
          <span>Mis encuestas</span>
        </a>
      </li>
    </ul>

    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h7v2H5v14h7v2zm11-4l-1.375-1.45l2.55-2.55H9v-2h8.175l-2.55-2.55L16 7l5 5z"
          />
        </svg>
        <span>Cerrar sesión</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <!-- Header -->
      <header class="dashboard-header">
        <h1 class="greeting">¡Hola, {{ currentUser?.name || 'Usuario' }}!</h1>
        <p class="subtitle">Un vistazo rápido a las encuestas disponibles en QuickSurvey</p>
      </header>

      <!-- Search Section -->
      <section class="search-section">
        <h2 class="section-title">Explora encuestas de otros usuarios</h2>

        <div class="search-bar">
          <svg
            class="search-icon"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 256 256"
          >
            <path
              fill="currentColor"
              d="M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"
            />
          </svg>
          <input
            type="text"
            class="search-input"
            placeholder="Buscar encuestas públicas..."
            [(ngModel)]="searchQuery"
            (input)="onSearchChange()"
          />
        </div>
      </section>

      <!-- Surveys Grid -->
      <section class="surveys-grid">
        <div class="survey-card" *ngFor="let survey of surveys">
          <h3 class="survey-title">{{ survey.title }}</h3>
          <p class="survey-author">De {{ getAuthorName(survey) }}</p>

          <div class="survey-footer">
            <div class="survey-votes">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32">
                <path
                  fill="currentColor"
                  d="M8 5v16h16V5zm2 2h12v12H10zm9.3 2.9L15 14.2l-2.3-2.3l-1.4 1.5l3 3l.7.7l.7-.7l5-5zM2 19v8h2v-6h2v-2zm24 0v2h2v6h2v-8zM6 23v2h20v-2z"
                />
              </svg>
              <span>{{ getVotesCount(survey) }} votos</span>
            </div>

            <button class="btn-participate" (click)="participate(survey.id)">PARTICIPAR</button>
          </div>
        </div>

        <!-- Mensaje cuando no hay resultados -->
        <div class="no-results" *ngIf="surveys.length === 0">
          <p>No se encontraron encuestas</p>
        </div>
      </section>
    </div>
  </main>
</div>
