<div class="dashboard-container">
  <!-- Sidebar Navigation -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <h1 class="logo">
        <span class="logo-icon">â—‹</span>
        QuickSurvey
      </h1>
    </div>

    <ul class="nav-menu">
      <li class="nav-item" [class.active]="activeRoute === 'inicio'">
        <a
          href="/dashboard"
          class="nav-link"
          (click)="$event.preventDefault(); setActiveRoute('inicio')"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor" d="m12 3l8 6v12h-5v-7H9v7H4V9z" />
          </svg>
          <span>Inicio</span>
        </a>
      </li>

      <li class="nav-item" [class.active]="activeRoute === 'crear'">
        <a
          href="/create-survey"
          class="nav-link"
          (click)="$event.preventDefault(); setActiveRoute('crear')"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor" d="M19 12.998h-6v6h-2v-6H5v-2h6v-6h2v6h6z" />
          </svg>
          <span>Crear encuesta</span>
        </a>
      </li>

      <li class="nav-item" [class.active]="activeRoute === 'encuestas'">
        <a
          href="/my-surveys"
          class="nav-link"
          (click)="$event.preventDefault(); setActiveRoute('encuestas')"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 1200 1200">
            <path
              fill="currentColor"
              d="M600 0c-65.168 0-115.356 54.372-115.356 119.385c0 62.619-.439 117.407-.439 117.407h-115.87c-2.181 0-4.291.241-6.372.586h-32.227v112.573h540.527V237.378h-32.227c-2.081-.345-4.191-.586-6.372-.586H715.796s1.318-49.596 1.318-117.041C717.114 57.131 665.168 0 600 0M175.195 114.185V1200h849.609V114.185H755.64v78.662h191.382v928.345h-693.97V192.847H444.36v-78.662zM600 115.649c21.35 0 38.599 17.18 38.599 38.452c0 21.311-17.249 38.525-38.599 38.525s-38.599-17.215-38.599-38.525c0-21.271 17.249-38.452 38.599-38.452M329.736 426.27v38.525h38.599V426.27zm115.869.732v38.525h424.658v-38.525zm-115.869 144.58v38.525h38.599v-38.525zm115.869.732v38.599h424.658v-38.599zM329.736 716.895v38.525h38.599v-38.525zm115.869.805v38.525h424.658V717.7zM329.736 862.28v38.525h38.599V862.28zm115.869.806v38.525h424.658v-38.525zm-115.869 144.507v38.525h38.599v-38.525zm115.869.805v38.525h424.658v-38.525z"
            />
          </svg>
          <span>Mis encuestas</span>
        </a>
      </li>
    </ul>

    <div class="sidebar-footer">
      <button class="user-menu">
        <div class="user-avatar">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"
            />
          </svg>
        </div>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <header class="page-header">
        <h1 class="page-title">Mis encuestas</h1>
      </header>

      <!-- Search Section -->
      <section class="search-section">
        <div class="search-bar">
          <svg
            class="search-icon"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 256 256"
          >
            <path
              fill="currentColor"
              d="M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"
            />
          </svg>
          <input
            type="text"
            class="search-input"
            placeholder="Buscar encuestas..."
            [(ngModel)]="searchQuery"
            (input)="onSearchChange()"
          />
        </div>
      </section>

      <!-- Surveys Grid -->
      <section class="surveys-grid">
        <div class="survey-card" *ngFor="let survey of surveys">
          <h3 class="survey-title">{{ survey.title }}</h3>

          <div class="survey-info">
            <div class="survey-votes">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32">
                <path
                  fill="currentColor"
                  d="M8 5v16h16V5zm2 2h12v12H10zm9.3 2.9L15 14.2l-2.3-2.3l-1.4 1.5l3 3l.7.7l.7-.7l5-5zM2 19v8h2v-6h2v-2zm24 0v2h2v6h2v-8zM6 23v2h20v-2z"
                />
              </svg>
              <span>{{ getVotesCount(survey) }} votos</span>
            </div>

            <span class="survey-status" [class.active]="survey.is_active">
              {{ getStatusText(survey) }}
            </span>
          </div>

          <button class="btn-view" (click)="viewSurvey(survey.id)">VER</button>

          <button
            class="btn-toggle-status"
            (click)="toggleSurveyStatus(survey)"
            [class.reactivate]="!survey.is_active"
          >
            {{ survey.is_active ? 'Finalizar encuesta' : 'Reactivar encuesta' }}
          </button>
        </div>

        <!-- Mensaje cuando no hay resultados -->
        <div class="no-results" *ngIf="surveys.length === 0">
          <p>No tienes encuestas creadas</p>
        </div>
      </section>
    </div>
  </main>
</div>
